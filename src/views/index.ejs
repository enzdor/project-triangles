<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Triangles</title>
    <link rel="stylesheet" href="/css/index.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
</head>
<body>
    <div>
        <form action="/" method="post">
            <div>
                <label for="">Side A</label>
                <input type="number" step="0.0001" name="sideA" id="sideA">
            </div>
            <div>
                <label for="">Side B</label>
                <input type="number" step="0.0001" name="sideB" id="sideB">
            </div>
            <div>
                <label for="">Side C</label>
                <input type="number" step="0.0001" name="sideC" id="sideC">
            </div>
            <div>
                <input type="submit">
            </div>
        </form>
    </div>
    <div>
        <% if (locals.errors) { %>
            <p>Erorrs</p>
            <% for(let error of errors){ %> 
                <p><%= error.msg %> </p>
            <% } %> 
        <% } %>
    </div>
    <% if (angles.length == 0) {  %>
    <%} else { %>
        <div>
            <p>Angle A: <%= angles[0] %></p>
            <p>Angle B: <%= angles[1] %></p>
            <p>Angle C: <%= angles[2] %></p>
        </div>
    <%} %>
    <% if (area != 0) { %>
        <div>
            <p>Area = <%= area %>cubic </p>
        </div>
    <% } %>
    <article id="dataGraph"
    data-v3="<%= v3 %>"
    data-v5="<%= v5 %>"
    data-v6="<%= v6 %>"
    data-sa="<%= sideA %>"
    data-sb="<%= sideB %>"
    data-sc="<%= sideC %>">
    </article> 
    <div id="graph_container">
        <canvas id='graph'></canvas>
    </div>
    <script>
        const article = document.querySelector('#dataGraph');


        let number = Math.max(Number(article.dataset.sa),Number(article.dataset.sb),Number(article.dataset.sc));
        let largest = Math.round(number);
        console.log(largest);

        Chart.defaults.plugins.legend.display = 'false';

        const myChart = new Chart(
            document.getElementById('graph'),
            {
            type: 'scatter',
            data: {
                datasets: [{
                    label: 'Triangle Points',
                    data: [{
                        x: 0,
                        y: 0
                    },{
                        x: Number(article.dataset.v5),
                        y: Number(article.dataset.v6)
                    },{
                        x: Number(article.dataset.v3),
                        y: 0
                    },{
                        x: 0,
                        y: 0
                    }],
                    backgroundColor: 'red',
                    borderColor: 'red'
                }],
            },
            options: {
                plugins:{
                    legend: {
                        display: false,
                    },
                    title: {
                        display: true,
                        text: 'Your triangle (not up to scale)',
                    }
                },
                maintainAspectRatio: true,
                aspectRatio: 1,
                showLine: true,
                scales: {
                x: {
                    type: 'linear',
                    position: 'bottom',
                    max: largest,
                },
                y: {
                    type: 'linear',
                    position: 'left',
                    max: largest,
                }}
            }
            }
        );
    </script>
</body>
</html>